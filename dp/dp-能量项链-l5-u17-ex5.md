# [NOIP 2006 提高组 第一题] 能量项链

- [l5-u17-ex5](https://oj.youdao.com/course/37/286/1#/1/14429)
- [luogu P1063](https://www.luogu.com.cn/problem/P1063)

项链上有 N 颗能量珠。每个能量珠，有一个头标记、一个尾标记，都是正整数。

相邻的两颗珠子，前一颗的尾标记一定等于后一颗的头标记。

两颗珠子，头尾标记分别是 (m, r) 和 (r, n)，合并，放出能量 `m * r * n`，产生一颗新珠子，其头、尾标记分别为 (m, n)。

持续合并，直到项链上只剩下一颗珠子。合并顺序不同，放出的总能量也不同。

请设计一个合并顺序，使放出的总能量最大。

# 解法

类似环形的矩阵链乘。

典型的区间 dp 问题。用三层循环：
```
枚举区间长度 len，从小到大
  枚举左端点 L (右端点 R = L + len - 1)
    枚举区间 [L, R] 的分界点 k，由 [L, k] 和 [k+1, R] 推导出 [L, R]
```

为什么 for (int l = 0; l + len - 1 <= n * 2 - 1; l++) l的范围并不是 0 ~ n-1

为什么 dp[l][l + n] 而不是 dp[l][l + (n-1)]?

初值设置， why 都是 0？哪些真的需要设置？

完整代码：[powerful-necklace-l5-u17-ex5.cpp](code/powerful-necklace-l5-u17-ex5.cpp) luogu ac
