# [l4, u14 动规入门 2, ex4: 合唱队形](https://oj.youdao.com/course/13/82/1#/1/9468)

递增和递降两个子序列的结合

假设第 i 人是高点。求出 i 左边的 LIS 长度 fi，i 右边的 LDS 长度 gi。由于最高点 i 同时在两个左右两个子序列中，故队形长度为 `leni = fi + gi - 1`。

对所有 i，求出 leni，打擂台比较，得到最大的 leni，即可。

注意 1：如何求 i 右边的最长递减子序列长度？求普通 LCS 长度时，迭代的是以某元素 i 为结尾的 LCS 长度。现在的场景，是以 i 为开头，原来的算法需要改造。需要反过来，以整个序列的结尾为开头，找以 i 为结尾的LCS长度。其实还是递增而不是递减，但方向相反。

注意 2：很容易想到定义一个函数 `lis(int i)`，则 `len[i] = lis(i)`。再一想，计算 len[i] 其实需要先计算出 len[0], len[1] 一直到 len[i-1] 并遍历它们。故不用此法。

注意 3：坑：本题中是严格递增或递减，而不是递不减或递不增。

代码中各数组范围是 [1, n]

代码：[lis-choir-l4-u14-ex4.cpp](code/lis-choir-l4-u14-ex4.cpp)