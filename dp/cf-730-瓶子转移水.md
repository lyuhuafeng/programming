# [`luogu CF730J bottles 瓶子转移水`](https://www.luogu.com.cn/problem/CF730J)

动态规划，0-1背包，bottles 瓶子转移水，有道L4-动规入门1-作业题

n 瓶水，第 i 瓶水的水量为 ai，容量为 bi。将 1 单位水从某瓶子转移到另一瓶，耗时1 秒，且可无限次转移。求储存所有水所需最小瓶数 k，及该情况下所用最少时间 t。

# 解析

可无限次倒水，显然应取容量最大的若干瓶子。排序，按瓶容量从大到小依次取，直到瓶容量总和超过水量，可得最小瓶数 k。

要使时间 t 最小化，只要使 Vtotal – Vno_move 最大化。

瓶子数量确定是 k 个，但也不一定是容量最大的 k 个。容量小一些，也可能满足 k 个瓶子装下所有的水。要看哪 k 瓶能使移动的水最少。

`f[i][j][kk]` 表示，前 i 个瓶子，从中取 kk 个，总容量为 j，能得到的最大 Vno_move.

```cpp
    f[i][j][kk] = max(f[i-1][j][kk], f[i-1][j - bi][kk - 1] + ai)
```
这个式子里的三项，分别为：
- 前 i 个瓶子，从中取 kk 个，总容积为 j
- kk 个瓶子中不包括第 i 个瓶子，与前 i-1 个瓶子时状态一致。
- kk 个瓶子中包括第 i 个瓶子，则为前 i-1 个瓶子时从中选取 kk-1 个，总容积为 j-bi 时的状态加上第 i 个瓶子中有的 ai 水。

状态压缩：若化去 i，j 和 kk 都从后往前。

代码：[`luogu-cf730j-bottles.cpp`](code/luogu-cf730j-bottles.cpp) 待上 cf 网站验证。